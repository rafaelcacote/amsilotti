<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste do Botão de Imprimir</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h1>Teste de Funcionalidade - Botão Imprimir Perícias</h1>

        <div class="alert alert-info">
            <h4>Implementação Concluída!</h4>
            <p>As seguintes funcionalidades foram implementadas:</p>
            <ul>
                <li><strong>Botão de Imprimir:</strong> Adicionado ao lado do botão "Nova Perícia"</li>
                <li><strong>Rota de Impressão:</strong> <code>/controle-pericias-imprimir</code></li>
                <li><strong>Filtros Preservados:</strong> O botão captura todos os filtros aplicados na pesquisa</li>
                <li><strong>PDF com mPDF:</strong> Utiliza o mPDF já instalado no sistema</li>
                <li><strong>Design Consistente:</strong> Segue o mesmo padrão visual dos outros relatórios</li>
            </ul>
        </div>

        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5><i class="fas fa-check-circle me-2"></i>Funcionalidades Implementadas</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6><i class="fas fa-plus text-success me-2"></i>Novo Botão na Interface</h6>
                        <p>Botão "Imprimir" adicionado ao lado de "Nova Perícia" com ícone de impressora e estilo
                            consistente.</p>

                        <h6><i class="fas fa-filter text-info me-2"></i>Preservação de Filtros</h6>
                        <p>O sistema captura automaticamente todos os filtros aplicados (busca, vara, responsável,
                            status, tipo, mês/ano).</p>
                    </div>
                    <div class="col-md-6">
                        <h6><i class="fas fa-file-pdf text-danger me-2"></i>Geração de PDF</h6>
                        <p>PDF gerado em formato paisagem com tabela completa dos dados filtrados.</p>

                        <h6><i class="fas fa-shield-alt text-warning me-2"></i>Controle de Permissões</h6>
                        <p>Botão só aparece para usuários com permissão "export pericias".</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header bg-success text-white">
                <h5><i class="fas fa-cog me-2"></i>Como Funciona</h5>
            </div>
            <div class="card-body">
                <ol>
                    <li><strong>Usuário acessa a listagem:</strong> <code>/controle-pericias</code></li>
                    <li><strong>Aplica filtros (opcional):</strong> Busca, vara, responsável, status, etc.</li>
                    <li><strong>Clica no botão "Imprimir":</strong> Ao lado de "Nova Perícia"</li>
                    <li><strong>JavaScript captura os filtros:</strong> Parâmetros da URL atual</li>
                    <li><strong>Abre nova aba:</strong> Com PDF dos dados filtrados</li>
                    <li><strong>PDF inclui:</strong> Cabeçalho, filtros aplicados, tabela completa</li>
                </ol>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header bg-warning text-dark">
                <h5><i class="fas fa-list-alt me-2"></i>Arquivos Modificados/Criados</h5>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <strong>resources/views/controle-pericias/index.blade.php</strong>
                        <br><small class="text-muted">Adicionado botão e JavaScript</small>
                    </li>
                    <li class="list-group-item">
                        <strong>app/Http/Controllers/ControlePericiasController.php</strong>
                        <br><small class="text-muted">Adicionado método printList()</small>
                    </li>
                    <li class="list-group-item">
                        <strong>routes/web.php</strong>
                        <br><small class="text-muted">Adicionada rota controle-pericias.print-list</small>
                    </li>
                    <li class="list-group-item">
                        <strong>resources/views/controle-pericias/print-list.blade.php</strong>
                        <br><small class="text-muted">Nova view para impressão da listagem</small>
                    </li>
                </ul>
            </div>
        </div>

        <div class="alert alert-success mt-4">
            <h5><i class="fas fa-check-circle me-2"></i>Pronto para Uso!</h5>
            <p class="mb-0">A funcionalidade está completa e pronta para ser utilizada. O botão aparecerá
                automaticamente para usuários com a permissão apropriada.</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>